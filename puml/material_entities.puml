@startuml

skinparam maxMessageSize 100
skinparam shadowing false

title Relationships of material entities.\n

class Card {
	id : int
	isStarred : bool
	isHidden : bool
}
class Entry {
	id : int
	tags : Set<EntryTag>
	fieldData : Map<String, String>
}
class Deck {
	id : int
	name : String
	createdDateTime : DateTime
	lastEditedDateTime : DateTime
	authorName : String
	description : String
}

Deck "1" <--> "0..*" Entry : owns >
Entry "1" <--> "1..*" Card : generates >
Deck "1" <--> "0..*" Card : owns >

class EntryType {
	id : int
	name : String
	cardFormats : List<CardFormat>
	fieldSpecs : List<EntryFieldSpec>
}
class EntryFieldSpec {
	name : String
	type : EntryFieldType
}
class CardFormat {
	id : int
	name : String
	front : CardFormatStructure
	back : CardFormatStructure
}
class CardFormatStructure {
	components : List<Component>
}
abstract class Component {
	name : String
}

Entry "0..*" <--> "1" EntryType : has fields and Card generation defined by >
EntryType "1" *--- "1..*" CardFormat : contains for each Card generated by each Entry >
CardFormat "1" <--> "0..*" Card : specifies display style and structure of >
EntryType "1" *-- "1..*" EntryFieldSpec
CardFormat "1" *-- "2" CardFormatStructure : has structure specified by >
CardFormatStructure "1" *-- "0..*" Component : is composed of >

@enduml